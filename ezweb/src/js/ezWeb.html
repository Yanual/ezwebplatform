<html>
<head>
<title>EzWeb Platform</title>

<meta http-equiv="content-type" content="text/html; charset=utf-8" />

<link rel="stylesheet" type="text/css" media="screen,projection" href="../css/ezweb.css" />
<link rel="stylesheet" type="text/css" href="style.css">
<link rel="stylesheet" type="text/css" href="../css/dragboard.css">
<link rel="stylesheet" type="text/css" href="wiring/style.css"><!-- Temporary css for the wiring module interface -->
<link rel="shortcut icon" type="image/x-icon" href="../css/favicon.ico" />

<script language="JavaScript" src="lib/prototype.js"></script>
<script language="JavaScript" src="common/uris.js"></script>
<script language="JavaScript" src="common/modules.js"></script>
<script language="JavaScript" src="persistenceEngine/PersistenceEngine.js"></script>

<script language="JavaScript" src="gadgetModel/XHtml.js"></script>
<script language="JavaScript" src="gadgetModel/Template.js"></script>
<script language="JavaScript" src="gadgetModel/Gadget.js"></script>

<script language="JavaScript" src="opManager/OpManager.js"></script>
<script language="JavaScript" src="varManager/VariableGadget.js"></script>
<script language="JavaScript" src="varManager/VariablePlatform.js"></script>
<script language="JavaScript" src="varManager/varManager.js"></script>

<script language="JavaScript" src="showcase/showcase.js"></script>
<script language="JavaScript" src="showcase/util.js"></script>

<script type="text/javascript" language="javascript" src="lib/scriptaculous/scriptaculous.js"></script>
<script type="text/javascript" language="javascript" src="dragboard/dragboard.js"></script>
<script type="text/javascript" language="javascript" src="dragboard/UserPref.js"></script>

<script language="JavaScript" src="wiring/connectable.js"></script>
<script language="JavaScript" src="wiring/wiring.js"></script>
<script language="JavaScript" src="wiring/wiringInterface.js"></script>

<!-- Initialization code -->
<script language="JavaScript">
	
	function show_showcase(){
		$('dragboard_container').style.display='none';
		$('wiring_container').style.display='none';
		$('showcase_container').style.display='block';
		var myshowcase = ShowcaseFactory.getInstance();
		myshowcase.repaint();
	}
	
	function show_dragboard(){
		$('wiring_container').style.display='none';
		$('showcase_container').style.display='none';
		$('dragboard_container').style.display='block';
	}
	
	function show_wiring(){
		$('dragboard_container').style.display='none';
		$('showcase_container').style.display='none';
		$('wiring_container').style.display='block';
	}
	
	// Platform initialization
	var opManager = OpManagerFactory.getInstance();
	opManager.loadEnviroment();
	

	var wI = new wiringInterface();
	var w = WiringFactory.getInstance();	
		
</script>

</head>

<body>

<!-- HEADER -->
<table style="width: 100%; height: 9%">
	<tr>
		<td><img src="http://europa.ls.fi.upm.es:8000/ezweb/Ezweb.png" style="width: 120; height: 60" alt="Logo cannot be shown"></td>
		<td valign="top" style="text-align: right"><div id="toolbar">
				<a href="javascript:;" onclick="show_showcase();">My Gadgets</a> | <a href="javascript:;" onclick="show_wiring();wI.renewInterface(w,$('selectCanal'),$('gadgets'),$('canales'))">My Pipes</a>
		</div></td>
	</tr>
</table>

<!-- DRAGBOARD LAYER -->
<div id="dragboard_container" style="width:100%; height:90%; border: solid green 1px">
<table style="position: relative; width:100%; height:4%">
	<tr>
		<td style="text-align:left"><h3>My Instances</h3></td>
		<td style="text-align:right"></td>
	</tr>
</table>
	<div style="position:relative; width:100%; height:93%; overflow:auto" id="dragboard">
	<!-- DRAGBOARD VIEW -->
	<div id="dragboard">
	 
	</div>
	
	</div> <!-- DRAGBOARD VIEW -->
</div> <!-- DRAGBOARD LAYER -->

<!-- SHOWCASE LAYER -->
<div id="showcase_container"  style="width: 100%; height: 90%; border: solid red 1px; display: none">
	<table style="position: relative; width:100%; height:4%">
	<tr>
		<td style="text-align:left"><h3>My Gadgets</h3></td>
		<td style="text-align:right" valign="top"><a href="javascript:;" onclick="show_dragboard();">hide</a></td>
	</tr>
	</table>
	<div style="position:relative; width:100%; height:93%; overflow:auto" id="showcase">
	<!-- SHOWCASE VIEW -->
	</div> <!-- SHOWCASE VIEW -->
</div> <!-- SHOWCASE LAYER -->

<!-- WIRING LAYER -->
<div id="wiring_container" style="width: 100%; height: 90%; border: solid grey 1px; display: none">
	<table style="position: relative; width:100%; height:4%">
	<tr>
		<td style="text-align:left"><h3>My Pipes</h3></td>
		<td style="text-align:right" valign="top"><a href="javascript:;" onclick="show_dragboard();">hide</a></td>
	</tr>
	</table>
	<div style="position:relative; width:100%; height:93%; overflow:auto" id="wiring">
	<!-- WIRING VIEW -->
		<div class = "left">
			<input id = "gadget9" type = text value = "id gadget...">
			<input id = "event9"  type = text value = "name event...">
			<input id = "value9"  type = text value = "value...">
			<input type = button  value= "send event" onclick = "w.sendEvent($F($('gadget9')),$F($('event9')), $F($('value9')));wI.renewChannel(w,$F($('selectCanal')),$('slotsConnection'),$('eventsConnection'))">
		</div>
		<div class = "container">
			<fieldset id = "one">
				<div id = "selector">
					<em>Seleccione un canal:</em>
					<select id = "selectCanal"  onChange = "wI.renewChannel(w,$F($('selectCanal')),$('slotsConnection'),$('eventsConnection'))">
						<option value = "" selected>----</option>
					</select>
				</div>
				<div id = "view">
					<input id = "valor" type = "text" value = "">
					<input id = "addChannel" type=image src=wiring/add.png title="Create Channel" alt= "create channel"
					    onclick = "wI.anadirCanal(w,$('selectCanal'),$('canales'),$('slotsConnection'),$('eventsConnection'))">
					<input id = "deleteChannel" type=image src=wiring/delete.png title="Delete Channel" alt= "Delete Channel"
					    onclick = "wI.borrarCanal(w,$('selectCanal').value,$('selectCanal'),$('canales'),$('slotsConnection'),$('eventsConnection'))">
				</div>
				<div id = "tab_one">
					<table class = "header">
						<tr><td> </td><td>Input connection</td></tr>
					</table>
					<div class = "contents">
        					<table class = "bodier" id = "eventsConnection">
						</table>
					</div>
				</div>
				<div id = "tab_two">
					<table class = "header">
						<tr><td> </td><td>Output connection</td></tr>
					</table>
					<div class = "contents">
        					<table class = "bodier" id = "slotsConnection">
						</table>
					</div>
				</div>
			</fieldset>
			<fieldset id = "two">
				<div>
					<input id = "refreshbutton" type = image src = wiring/disk.png title = "Save data" alt = "Actualizar" onClick = "w.restaure()">	
				</div>
				<div id = "selector">
					<em>Seleccione un item:</em>
					<select id = "itemizer"  onChange = "wI.renewItem(w,$F($('itemizer')),$('slots'),$('events'))">
						<option value = "" selected>----</option>
						<optgroup id="canales">
							<option value = "" disabled>Canales</option>
							</optgroup>
						<optgroup id ="gadgets">
							<option value = "" disabled>Gadgets</option>
						</optgroup>
					</select>
				</div>
				<div id = "tab_one">
					<table class = "header">
						<tr><td> </td><td>Outputs</td></tr>
					</table>
					<div class = "contents">
        					<table class = "bodier" id = "events">
						</table>
					</div>
				</div>
				<div id = "tab_two">
					<table class = "header">
						<tr><td> </td><td>Inputs</td></tr>
					</table>
					<div class = "contents">
        					<table class = "bodier" id = "slots">
						</table>
					</div>
				</div>
			</fieldset>
		</div>
	</div> <!-- WIRING VIEW -->
</div> <!-- WIRING LAYER -->

</body>
</html>
