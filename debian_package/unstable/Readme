 Paquetes necesarios para crear paquetes EzWeb
================================================

  * dpkg-dev
  * dch
  * reprepro

 dch
======

Este programa sirve para manejar los ficheros changelog de los paquetes debian y
se utiliza en los scripts de creación de los paquetes para asegurar que la
última versión indicada en este fichero coincide con la versión indicada en el
nombre del paquete, dado que esto es un requisito de los paquetes debian.

Lo más importante de cara a crear los paquetes debian, es tener bien configurado
el dch para el usuario que va a crear los paquetes, dado que este programa
realiza distintas operaciones dependiendo de la configuración (por ejemplo,
añade distintos comentarios en el fichero changelog si el que crea el paquete es
un "maintainer" o "uploader" que si no es uno de estos [mirar el fichero
debian/control para más información]).

Los parámetros más importante se configuran mediante las variables de entorno
DEBFULLNAME y DEBEMAIL (en caso de no establecerse estas variables de entorno,
dch intenta usar las variables de entono NAME y EMAIL respectivamente, aunque
estas últimas son más genéricas y no son usadas solamente por dch).

 Reprepro
============

Para el manejo del repositorio se recomienda el uso de reprepro, que facilitará
el la creación de los ficheros y estructuras necesarias de forma significativa.
Además los scripts están preparados para usar estos, siendo necesario su
modificación en caso de querer hacer uso de otros programas.

Si se necesita crear un repositorio, bastaría con copiar el directorio
repo.skeleton donde se quiera crear el repositorio y modificar la configuración
según sea necesario. Por ejemplo:

   cp -R repo.skeleton /var/www/debian

En caso de que el directorio /var/www/debian fuese visible a través de la URL:

   http://servidor.com/debian

La entrada en el sources.list, con la configuración que viene por defecto en
repo.skeleton, sería la siguiente:

   deb http://servidor/debian unstable main

reprepro se encarga automaticamente de borrar los paquetes antiguos, así como
de crear la estructura necesaria para las distintas arquitecturas/ramas que
vaya a tener el repositorio y los distintos tipos de ficheros necesarios
(Packages[.gz|.bz2], Releases, etc). Esto se puede hacer tanto a mano
(mediante la ejecucción de los comandos necesarios) o de forma automática
(mediante el manejo de una cola de admisión de paquetes).

En la siguiente URL se puede ver un tutorial más amplio de como usar reprepro,
en el que se pueden ver los distintos parámetros de configuración que admite,
como añadir/borrar paquetes, etc:

   http://www.debian-administration.org/articles/286

 Lintian
==========

Lintian es un programa que permite comprobar que los paquetes debian están
construidos de forma correcta, además de que alerta de posibles fallos mediante
"warnings". Además muestra información sobre los errores y los warnings así
como consejos de como solucionarlos.







 Recursos disponibles en este directorio
==========================================

 * repos: init script para lanzar los demonios necesarios para que cuando se
   realice una subida a la cola de paquetes se ejecuten los comandos necesarios
   para que se añadan los paquetes al repositorio.


 * create-debs.sh: facilita la creación de los paquetes debian. Flags
   soportados:
     -n: Busca cambios en el repositorio svn de EzWeb, y dependiendo de si los
        encuentra o no, crea una nueva revisión o una nueva versión de los
        paquetes debian. El script se encarga de descargar la nueva versión de
        EzWeb de los repositorios svn y abre un editor para modificar el
        fichero changelog.

     -b: Indica que lo que se quiere es crear los paquetes debian.
     -i: Indica que lo que se quiere hacer es instalar los paquetes debian en
        los repositorios.

   En caso de no indicar ninguno de los flags -b o -i. Se asume que se ha
   utilizado el flag -b.

